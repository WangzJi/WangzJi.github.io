<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid Test</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .mermaid {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .test-section {
            margin: 40px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <h1>Mermaid 图表测试</h1>
    
    <div class="test-section">
        <h2>测试 1: 简单流程图</h2>
        <div class="mermaid">
graph TD
    A[开始] --> B{判断}
    B -->|是| C[执行]
    B -->|否| D[结束]
    C --> D
        </div>
    </div>
    
    <div class="test-section">
        <h2>测试 2: Seata 架构图</h2>
        <div class="mermaid">
graph TB
    subgraph "业务应用"
        A["@GlobalTransactional<br/>业务方法"] --> B["AOP代理拦截"]
        B --> C["TransactionalTemplate"]
    end
    
    subgraph "TM模块核心组件"
        C --> D["GlobalTransaction"]
        D --> E["DefaultTransactionManager"]
        C --> F["TransactionHookManager"]
    end
    
    subgraph "TC服务器"
        G["Transaction Coordinator"]
        H["全局事务状态管理"]
        I["分支事务协调"]
    end
    
    E -->|"GlobalBeginRequest"| G
    G -->|"响应事务状态"| E
    
    G --> H
    G --> I
        </div>
    </div>
    
    <div class="test-section">
        <h2>测试 3: 序列图</h2>
        <div class="mermaid">
sequenceDiagram
    participant A as 客户端
    participant B as 服务器
    participant C as 数据库
    
    A->>B: 发送请求
    B->>C: 查询数据
    C-->>B: 返回结果
    B-->>A: 响应数据
        </div>
    </div>

    <script>
        mermaid.initialize({
            theme: 'dark',
            themeVariables: {
                primaryColor: '#00ff88',
                primaryTextColor: '#ffffff',
                primaryBorderColor: '#00ff88',
                lineColor: '#00d4ff',
                secondaryColor: '#ff0080',
                background: '#0a0a0a'
            },
            securityLevel: 'loose',
            startOnLoad: true
        });
        
        console.log('Mermaid version:', mermaid.version);
    </script>
</body>
</html> 